<div class="fondo-login">
  <!-- Lado izquierdo con imagen -->
  <div class="login-left">
    <div class="login-left-content">
      <div class="login-left-icon">
        <i class="bi bi-heart-pulse-fill"></i>
      </div>
      <h1>Sistema de Obstetricia</h1>
      <p>Cuidando la vida desde el primer momento. Gestiona de manera integral la atención prenatal, natal y postnatal con nuestro sistema especializado.</p>
    </div>
  </div>

  <!-- Lado derecho con formulario -->
  <div class="login-right">
    <div class="login-card">
      <div class="logo-container">
        <img src="https://yt3.googleusercontent.com/dSnqcXzoOXSJp35-I_9lPnUTa3M9qOuck07IS_UlvCz3lmBRQ8uohBfqb5GRzeOAdZjWKmeD=s900-c-k-c0x00ffffff-no-rj" alt="Logo MINSA">
      </div>

      <h2 class="titulo-login">Bienvenido</h2>
      <p class="subtitulo-login">Ingresa tus credenciales para acceder al sistema</p>

      <form #f="ngForm" (ngSubmit)="onSubmit(f)">
        
        <!-- Usuario (DNI) -->
        <div class="input-wrapper">
          <i class="bi bi-person-fill input-icon"></i>
          <input
            type="text"
            class="form-input"
            id="dni"
            placeholder="Usuario (DNI)"
            name="dni"
            [(ngModel)]="dni"
            required
            [disabled]="isBlocked"
            #dniInput="ngModel"
          />
          @if (dniInput.invalid && (dniInput.touched || submitted)) {
          <div class="text-danger">El usuario (DNI) es obligatorio.</div>
          }
        </div>

        <!-- Contraseña -->
        <div class="input-wrapper">
          <i class="bi bi-lock-fill input-icon"></i>
          <input
            [type]="showPassword ? 'text' : 'password'"
            class="form-input"
            id="contrasena"
            placeholder="Contraseña"
            name="contrasena"
            [(ngModel)]="contrasena"
            required
            [disabled]="isBlocked"
            #contrasenaInput="ngModel"
          />
          <button
            type="button"
            class="password-toggle"
            (click)="togglePassword()"
            tabindex="-1"
            [disabled]="isBlocked"
          >
            <i [class]="showPassword ? 'bi bi-eye-slash' : 'bi bi-eye'"></i>
          </button>
          @if (contrasenaInput.invalid && (contrasenaInput.touched || submitted)) {
          <div class="text-danger">La contraseña es obligatoria.</div>
          }
        </div>

        <!-- Mensaje de error general -->
        @if (errorMessage && !isBlocked) {
        <div class="alert alert-danger">
          <i class="bi bi-exclamation-triangle-fill me-2"></i>
          {{ errorMessage }}
        </div>
        }

        <!-- Mensaje de bloqueo -->
        @if (isBlocked) {
        <div class="alert alert-danger">
          <i class="bi bi-shield-fill-exclamation me-2"></i>
          Demasiados intentos fallidos. Intenta de nuevo en
          <strong>{{ remainingTime }}</strong> segundos.
        </div>
        }

        <!-- reCAPTCHA -->
        <div class="recaptcha-container">
          <div id="recaptcha-widget"></div>
        </div>

        <!-- Checkbox de privacidad -->
        <div class="form-check-wrapper">
          <input
            class="form-check-input"
            type="checkbox"
            id="privacy"
            name="privacy"
            [(ngModel)]="privacy"
            required
          />
          <label class="form-check-label" for="privacy">
            Acepto las políticas de privacidad <span class="text-danger">*</span>
          </label>
          @if (!privacy && submitted) {
          <div class="text-danger">Debes aceptar las políticas de privacidad.</div>
          }
        </div>

        <!-- Botón de submit -->
        <button type="submit" class="btn-login" [disabled]="isBlocked || f.invalid">
          Iniciar sesión
        </button>
      </form>
    </div>
  </div>
</div>