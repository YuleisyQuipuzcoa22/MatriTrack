<div class="puerperio-root">
  <div class="header-section">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-8">
          <h2>
            <i class="bi bi-folder2-open"></i>
            Lista de Detalles de Análisis
          </h2>
        </div>
        <div class="col-md-4 text-end">
        <a class="btn btn-agregar" [routerLink]="['/detalle-analisis/registrar']">
            <i class="bi bi-plus-circle-fill me-2"></i>
            Agregar Nuevo
        </a>
        </div>

      </div>
    </div>
  </div>
</div>

<div class="container">
  <!-- Filtros -->
  <div class="filters-section">
    <div class="filters-title">
      <span>
        <i class="bi bi-funnel-fill me-2"></i>
        Filtros de Búsqueda
      </span>
    </div>

    <div class="row g-3">
      <div class="col-md-4">
    <select class="form-select filter-input" (change)="actualizarFiltroTipo($event)">
        <option value="">Todos los tipos</option>
        <option *ngFor="let tipo of tiposAnalisis" [value]="tipo">{{ tipo }}</option>
    </select>
    </div>

    </div>
  </div>

  <!-- Resultados -->
  <p class="results-info">
    <i class="bi bi-list-ul me-2"></i>
    {{ filtrados.length }} resultados encontrados
  </p>

  <!-- Grid de Cards -->
  <div class="obstetras-grid">
    <div *ngFor="let det of filtrados" class="obstetra-card tile-card">
      <div class="card-body-custom">
        <h6 class="obstetra-name">
          <i class="bi bi-folder2-open"></i>
          {{ det.tipoAnalisis }} <span class="obstetra-id">#{{ det.id }}</span>
        </h6>

        <div class="info-item">
          <i class="bi bi-calendar-event"></i>
          <strong>F. Realización:</strong> <span class="ms-2">{{ det.fechaRealizacion }}</span>
        </div>

        <div class="info-item">
          <i class="bi bi-calendar-check"></i>
          <strong>F. Registro:</strong> <span class="ms-2">{{ det.fechaRegistro }}</span>
        </div>
      </div>

      <div class="card-footer-custom">
        <div class="actions-group">
          <button class="btn-action-full btn-info-action" 
                  (click)="verDetalle(det)" [routerLink]="['/consulta-detalles-analisis', det.id]">
            <i class="bi bi-info-circle-fill me-2"></i>
            Ver Detalles
          </button>
          <a class="btn-action-full btn-edit-action" 
             [routerLink]="['/detalle-analisis', det.id]"
             [class.disabled]="det.expirado"
             [attr.aria-disabled]="det.expirado">
            <i class="bi bi-pencil-square me-2"></i>
            Editar
          </a>
        </div>
      </div>

    </div>

    <div *ngIf="filtrados.length === 0" class="no-results">
      <i class="bi bi-file-earmark-slides"></i>
      <h4>0 resultados encontrados</h4>
      <p>No se encontraron registros que coincidan con los filtros aplicados.</p>
    </div>
  </div>

</div>